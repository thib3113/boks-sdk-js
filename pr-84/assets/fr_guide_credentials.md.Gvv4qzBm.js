import{_ as s,o as i,c as a,a1 as t}from"./chunks/framework.C4bPQQ3A.js";const h=JSON.parse('{"title":"Récupérer ses Clés","description":"","frontmatter":{},"headers":[],"relativePath":"fr/guide/credentials.md","filePath":"fr/guide/credentials.md"}'),o={name:"fr/guide/credentials.md"};function r(n,e,l,d,c,u){return i(),a("div",null,[...e[0]||(e[0]=[t(`<h1 id="recuperer-ses-cles" tabindex="-1">Récupérer ses Clés <a class="header-anchor" href="#recuperer-ses-cles" aria-label="Permalink to &quot;Récupérer ses Clés&quot;">​</a></h1><p>Pour interagir avec un appareil Boks via ce SDK, vous avez besoin d&#39;identifiants spécifiques. Alors que les opérations de base (ouverture de porte) ne nécessitent que le <strong>Code permanent (PIN)</strong>, les opérations administratives (gestion des codes, changement de paramètres) requièrent la <strong>Clé de Configuration</strong> (ConfigKey) ou la <strong>Clé Maîtresse</strong> (Master Key).</p><h2 id="concepts-cles" tabindex="-1">Concepts Clés <a class="header-anchor" href="#concepts-cles" aria-label="Permalink to &quot;Concepts Clés&quot;">​</a></h2><ul><li><strong>ConfigKey</strong> : Une chaîne hexadécimale de 8 caractères (ex: <code>A1B2C3D4</code>) utilisée pour authentifier les commandes BLE sensibles.</li><li><strong>Master Key</strong> : Une clé racine de 32 octets (64 caractères hex). La ConfigKey est dérivée de ses 4 derniers octets. Fournir la Master Key au SDK permet la <strong>génération de PIN hors-ligne</strong>.</li></ul><hr><h2 id="methode-1-api-cloud-recommande" tabindex="-1">Méthode 1 : API Cloud (Recommandé) <a class="header-anchor" href="#methode-1-api-cloud-recommande" aria-label="Permalink to &quot;Méthode 1 : API Cloud (Recommandé)&quot;">​</a></h2><p>Le moyen le plus simple de récupérer vos clés est d&#39;interroger l&#39;API Cloud officielle de Boks. Vos clés y sont stockées car votre compte Boks a été synchronisé avec leurs serveurs lors de l&#39;installation initiale.</p><h3 id="prerequis-compte-migre" tabindex="-1">Prérequis : Compte &quot;Migré&quot; <a class="header-anchor" href="#prerequis-compte-migre" aria-label="Permalink to &quot;Prérequis : Compte &quot;Migré&quot;&quot;">​</a></h3><p>Notez que Boks exige que les comptes soient &quot;migrés&quot; vers leur nouveau système. Si votre compte n&#39;est pas migré ou est bloqué dans l&#39;application officielle, l&#39;API peut retourner des clés vides.</p><h3 id="utiliser-un-script-de-recuperation" tabindex="-1">Utiliser un script de récupération <a class="header-anchor" href="#utiliser-un-script-de-recuperation" aria-label="Permalink to &quot;Utiliser un script de récupération&quot;">​</a></h3><p>Vous pouvez utiliser un script simple pour récupérer vos clés. L&#39;outil recommandé est le script <a href="https://github.com/thib3113/ha-boks/blob/main/scripts/get_config_key.py" target="_blank" rel="noreferrer">get_config_key.py</a> de l&#39;intégration Home Assistant. Il va :</p><ol><li>Se connecter à votre compte Boks via Google Identity.</li><li>Lister tous les appareils associés.</li><li>Afficher leur <strong>ConfigKey</strong> et leur <strong>adresse MAC</strong> respectives.</li></ol><hr><h2 id="methode-2-extraction-manuelle-android" tabindex="-1">Méthode 2 : Extraction Manuelle (Android) <a class="header-anchor" href="#methode-2-extraction-manuelle-android" aria-label="Permalink to &quot;Méthode 2 : Extraction Manuelle (Android)&quot;">​</a></h2><p>Si vous ne pouvez pas utiliser l&#39;API Cloud, vous pouvez extraire les clés de la base de données locale de l&#39;application Android.</p><h3 id="_1-localiser-la-base-de-donnees" tabindex="-1">1. Localiser la base de données <a class="header-anchor" href="#_1-localiser-la-base-de-donnees" aria-label="Permalink to &quot;1. Localiser la base de données&quot;">​</a></h3><p>L&#39;application stocke ses données dans une base IndexedDB située à : <code>/data/user/0/com.boks.app/app_webview/Default/IndexedDB/</code></p><p><em>Note : L&#39;accès à ce chemin nécessite un <strong>appareil rooté</strong> ou l&#39;utilisation d&#39;outils de sauvegarde spécifiques au fabricant qui contournent la restriction <code>allowBackup=false</code>.</em></p><h3 id="_2-extraire-la-cle" tabindex="-1">2. Extraire la Clé <a class="header-anchor" href="#_2-extraire-la-cle" aria-label="Permalink to &quot;2. Extraire la Clé&quot;">​</a></h3><p>Comme les données sont souvent compressées par LevelDB, utilisez un outil comme <strong><a href="https://github.com/google/dfindexeddb" target="_blank" rel="noreferrer">dfindexeddb</a></strong> pour analyser les fichiers :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dfindexeddb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dfindexeddb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /chemin/vers/dossier/IndexedDB/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chrome</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --use_manifest</span></span></code></pre></div><p>Recherchez <code>&quot;configurationKey&quot;</code> ou <code>&quot;masterKey&quot;</code> dans la sortie JSON résultante.</p><hr><h2 id="methode-3-extraction-manuelle-ios" tabindex="-1">Méthode 3 : Extraction Manuelle (iOS) <a class="header-anchor" href="#methode-3-extraction-manuelle-ios" aria-label="Permalink to &quot;Méthode 3 : Extraction Manuelle (iOS)&quot;">​</a></h2><p>Sur iOS, vous pouvez extraire les clés d&#39;une sauvegarde locale <strong>non chiffrée</strong> de votre iPhone.</p><ol><li>Créez une sauvegarde non chiffrée via <strong>iMazing</strong> ou iTunes.</li><li>Utilisez un explorateur de sauvegarde (comme iBackupBot) pour naviguer vers : <code>User App Files</code> &gt; <code>com.boks.app</code> &gt; <code>Library</code> &gt; <code>WebKit</code> &gt; <code>WebsiteData</code> &gt; <code>Default</code> &gt; <code>IndexedDB</code>.</li><li>Localisez le fichier <code>IndexedDB.sqlite3</code> et exportez-le.</li><li>Utilisez <strong>dfindexeddb</strong> pour l&#39;analyser :<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dfindexeddb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IndexedDB.sqlite3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> safari</span></span></code></pre></div></li></ol><hr><h2 id="pourquoi-faire-cet-effort" tabindex="-1">Pourquoi faire cet effort ? <a class="header-anchor" href="#pourquoi-faire-cet-effort" aria-label="Permalink to &quot;Pourquoi faire cet effort ?&quot;">​</a></h2><p>Une fois que vous avez récupéré votre <strong>Master Key</strong> ou votre <strong>ConfigKey</strong>, vous gagnez une <strong>indépendance totale</strong> vis-à-vis de l&#39;infrastructure Boks. Vous pouvez contrôler votre matériel directement via Bluetooth, générer vos propres codes de livraison, et garantir que votre boîte à colis reste fonctionnelle même si les services cloud officiels sont indisponibles.</p>`,29)])])}const g=s(o,[["render",r]]);export{h as __pageData,g as default};
