import{_ as t,o as a,c as i,a1 as o}from"./chunks/framework.C4bPQQ3A.js";const u=JSON.parse('{"title":"Retrieving Credentials","description":"","frontmatter":{},"headers":[],"relativePath":"guide/credentials.md","filePath":"guide/credentials.md"}'),s={name:"guide/credentials.md"};function r(n,e,d,h,l,c){return a(),i("div",null,[...e[0]||(e[0]=[o(`<h1 id="retrieving-credentials" tabindex="-1">Retrieving Credentials <a class="header-anchor" href="#retrieving-credentials" aria-label="Permalink to &quot;Retrieving Credentials&quot;">​</a></h1><p>To interact with a Boks device using this SDK, you need specific credentials. While basic operations (opening the door) only require a <strong>Master Code (PIN)</strong>, administrative operations (managing codes, changing settings) require the <strong>Configuration Key</strong> (ConfigKey) or the <strong>Master Key</strong>.</p><h2 id="key-concepts" tabindex="-1">Key Concepts <a class="header-anchor" href="#key-concepts" aria-label="Permalink to &quot;Key Concepts&quot;">​</a></h2><ul><li><strong>ConfigKey</strong>: An 8-character hex string (e.g., <code>A1B2C3D4</code>) used to authenticate sensitive BLE commands.</li><li><strong>Master Key</strong>: A 32-byte (64 hex chars) root key. The ConfigKey is derived from its last 4 bytes. Providing the Master Key to the SDK allows for <strong>offline PIN generation</strong>.</li></ul><hr><h2 id="method-1-cloud-api-recommended" tabindex="-1">Method 1: Cloud API (Recommended) <a class="header-anchor" href="#method-1-cloud-api-recommended" aria-label="Permalink to &quot;Method 1: Cloud API (Recommended)&quot;">​</a></h2><p>The easiest way to retrieve your keys is to query the official Boks Cloud API. Since your Boks account has been synchronized with their servers during the initial setup, the keys are stored there.</p><h3 id="prerequisite-migrated-account" tabindex="-1">Prerequisite: Migrated Account <a class="header-anchor" href="#prerequisite-migrated-account" aria-label="Permalink to &quot;Prerequisite: Migrated Account&quot;">​</a></h3><p>Note that Boks requires accounts to be &quot;migrated&quot; to their new system. If your account is not migrated or is blocked in the official app, the API may return empty keys.</p><h3 id="using-a-retrieval-script" tabindex="-1">Using a retrieval script <a class="header-anchor" href="#using-a-retrieval-script" aria-label="Permalink to &quot;Using a retrieval script&quot;">​</a></h3><p>You can use a simple script to fetch your keys. The recommended tool is the <a href="https://github.com/thib3113/ha-boks/blob/main/scripts/get_config_key.py" target="_blank" rel="noreferrer">get_config_key.py</a> script from the Home Assistant integration. It will:</p><ol><li>Log into your Boks account via Google Identity.</li><li>List all associated devices.</li><li>Display their respective <strong>ConfigKey</strong> and <strong>MAC address</strong>.</li></ol><hr><h2 id="method-2-manual-extraction-android" tabindex="-1">Method 2: Manual Extraction (Android) <a class="header-anchor" href="#method-2-manual-extraction-android" aria-label="Permalink to &quot;Method 2: Manual Extraction (Android)&quot;">​</a></h2><p>If you cannot use the Cloud API, you can extract the keys from the local database of the Android application.</p><h3 id="_1-locate-the-database" tabindex="-1">1. Locate the Database <a class="header-anchor" href="#_1-locate-the-database" aria-label="Permalink to &quot;1. Locate the Database&quot;">​</a></h3><p>The app stores its data in an IndexedDB database located at: <code>/data/user/0/com.boks.app/app_webview/Default/IndexedDB/</code></p><p><em>Note: Accessing this path requires a <strong>rooted device</strong> or using manufacturer-specific backup tools that bypass the <code>allowBackup=false</code> restriction.</em></p><h3 id="_2-extract-the-key" tabindex="-1">2. Extract the Key <a class="header-anchor" href="#_2-extract-the-key" aria-label="Permalink to &quot;2. Extract the Key&quot;">​</a></h3><p>Since the data is often compressed by LevelDB, use a tool like <strong><a href="https://github.com/google/dfindexeddb" target="_blank" rel="noreferrer">dfindexeddb</a></strong> to parse the files:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dfindexeddb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dfindexeddb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/IndexedDB/folder/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chrome</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --use_manifest</span></span></code></pre></div><p>Search for <code>&quot;configurationKey&quot;</code> or <code>&quot;masterKey&quot;</code> in the resulting JSON output.</p><hr><h2 id="method-3-manual-extraction-ios" tabindex="-1">Method 3: Manual Extraction (iOS) <a class="header-anchor" href="#method-3-manual-extraction-ios" aria-label="Permalink to &quot;Method 3: Manual Extraction (iOS)&quot;">​</a></h2><p>On iOS, you can extract the keys from an <strong>unencrypted</strong> local backup of your iPhone.</p><ol><li>Create an unencrypted backup using <strong>iMazing</strong> or iTunes.</li><li>Use a backup explorer (like iBackupBot) to navigate to: <code>User App Files</code> &gt; <code>com.boks.app</code> &gt; <code>Library</code> &gt; <code>WebKit</code> &gt; <code>WebsiteData</code> &gt; <code>Default</code> &gt; <code>IndexedDB</code>.</li><li>Locate the <code>IndexedDB.sqlite3</code> file and export it.</li><li>Use <strong>dfindexeddb</strong> to parse it:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dfindexeddb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IndexedDB.sqlite3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> safari</span></span></code></pre></div></li></ol><hr><h2 id="why-go-through-this-effort" tabindex="-1">Why go through this effort? <a class="header-anchor" href="#why-go-through-this-effort" aria-label="Permalink to &quot;Why go through this effort?&quot;">​</a></h2><p>Once you have retrieved your <strong>Master Key</strong> or <strong>ConfigKey</strong>, you gain <strong>total independence</strong> from the Boks infrastructure. You can control your hardware directly via Bluetooth, generate your own delivery codes, and ensure your parcel box remains functional even if the official cloud services are unavailable.</p>`,29)])])}const g=t(s,[["render",r]]);export{u as __pageData,g as default};
