<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Boks SDK Documentation - v0.0.8</title><meta name="description" content="Documentation for Boks SDK Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">Boks SDK Documentation - v0.0.8</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Boks SDK Documentation - v0.0.8</h1></div><div class="tsd-panel tsd-typography"><h1 id="boks-sdk-js-unofficial" class="tsd-anchor-link">Boks SDK JS (Unofficial)<a href="#boks-sdk-js-unofficial" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1>
<p><a href="https://www.npmjs.com/package/@thib3113/boks-sdk"><img src="https://img.shields.io/npm/v/@thib3113/boks-sdk?style=flat-square" alt="NPM Version"></a>
<a href="https://www.npmjs.com/package/@thib3113/boks-sdk"><img src="https://img.shields.io/npm/dm/@thib3113/boks-sdk?style=flat-square" alt="NPM Downloads"></a>
<a href="https://bundlephobia.com/package/@thib3113/boks-sdk"><img src="https://img.shields.io/bundlephobia/minzip/@thib3113/boks-sdk?style=flat-square" alt="Bundlephobia"></a>
<a href="https://www.typescriptlang.org/"><img src="https://img.shields.io/badge/Typed-TypeScript-blue?style=flat-square&amp;logo=typescript" alt="TypeScript"></a>
<a href="https://github.com/thib3113/boks-sdk-js/actions"><img src="https://img.shields.io/github/actions/workflow/status/thib3113/boks-sdk-js/ci.yml?style=flat-square" alt="Build Status"></a>
<a href="./LICENSE"><img src="https://img.shields.io/github/license/thib3113/boks-sdk-js?style=flat-square" alt="License"></a>
<a href="https://thib3113.github.io/boks-sdk-js/"><img src="https://img.shields.io/badge/docs-technical_manual-blue?style=flat-square" alt="Documentation"></a></p>
<p>A community-driven, high-fidelity JavaScript/TypeScript SDK for communicating with Boks Parcel Boxes.</p>
<h2 id="‚ú®-key-features" class="tsd-anchor-link">‚ú® Key Features<a href="#‚ú®-key-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li>üíé <strong>Fully Typed</strong>: Written in TypeScript with 100% type coverage for protocol and client.</li>
<li>üì¶ <strong>Zero Dependencies</strong>: Core logic is lightweight and has no external dependencies.</li>
<li>üß™ <strong>High-Fidelity Simulator</strong>: Develop and test without physical hardware.</li>
<li>üß© <strong>Modular Architecture</strong>: Separate <code>core</code> and <code>client</code> entry points for optimized bundle size.</li>
<li>üåê <strong>Platform Agnostic</strong>: Works in Browser (WebBluetooth), Node.js, and Mobile (Capacitor/Cordova).</li>
</ul>
<p>üëâ <strong><a href="https://thib3113.github.io/boks-sdk-js/">Read the Full Technical Manual (English &amp; Fran√ßais)</a></strong></p>
<blockquote>
<p>‚ö†Ô∏è <strong>Disclaimer:</strong> This project is <strong>not</strong> affiliated with, endorsed by, or associated with the manufacturer of the Boks device. It is an independent open-source effort for interoperability. See <a href="media/LEGALS.md">LEGALS.md</a> for full details.</p>
</blockquote>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<pre><code class="bash"><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@thib3113/boks-sdk</span>
</code><button type="button">Copy</button></pre>

<h2 id="high-level-usage-recommended" class="tsd-anchor-link">High-Level Usage (Recommended)<a href="#high-level-usage-recommended" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>The <code>BoksController</code> is the primary entry point for interacting with Boks devices. It handles the complexity of the protocol, connection management, and state tracking.</p>
<h3 id="1-initialization-connection" class="tsd-anchor-link">1. Initialization &amp; Connection<a href="#1-initialization-connection" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksController</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Initialize the controller (uses WebBluetooth by default in browsers)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">controller</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksController</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// Connect to a nearby Boks device</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">();</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Connected to Boks!&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="2-authentication-configuration" class="tsd-anchor-link">2. Authentication &amp; Configuration<a href="#2-authentication-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>The controller simplifies security. You can provide either the full <strong>Master Key</strong> (which allows all operations) or just the <strong>Configuration Key</strong> (if that's all you have, for restricted administrative tasks).</p>
<p><strong>Option A: Using the Master Key (Recommended)</strong>
The controller automatically extracts the Configuration Key from it.</p>
<pre><code class="typescript"><span class="hl-5">// Set your 32-byte Master Key (hex string)</span><br/><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">setCredentials</span><span class="hl-1">(</span><span class="hl-2">&#39;YOUR_MASTER_KEY_HEX_STRING_HERE&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Option B: Using the Configuration Key Only</strong>
If you don't possess the Master Key, you can still perform administrative tasks (like NFC management or history retrieval) by providing the Config Key directly. Note that some operations (like generating PINs locally) require the Master Key.</p>
<pre><code class="typescript"><span class="hl-5">// Set your Configuration Key (derived from Master Key or provided separately)</span><br/><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">setCredentials</span><span class="hl-1">(</span><span class="hl-2">&#39;YOUR_CONFIG_KEY_HEX_STRING_HERE&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="3-basic-operations" class="tsd-anchor-link">3. Basic Operations<a href="#3-basic-operations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Once connected and authenticated (if required for the operation), you can send commands.</p>
<pre><code class="typescript"><span class="hl-5">// Open the door with a PIN code</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">success</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">openDoor</span><span class="hl-1">(</span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Door opened!&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Invalid PIN.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Get the current door status</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">isOpen</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">getDoorStatus</span><span class="hl-1">();</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Door is </span><span class="hl-6">${</span><span class="hl-4">isOpen</span><span class="hl-8"> </span><span class="hl-1">?</span><span class="hl-8"> </span><span class="hl-2">&#39;Open&#39;</span><span class="hl-8"> </span><span class="hl-1">:</span><span class="hl-8"> </span><span class="hl-2">&#39;Closed&#39;</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="4-advanced-administrative-tasks" class="tsd-anchor-link">4. Advanced Administrative Tasks<a href="#4-advanced-administrative-tasks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Administrative tasks like NFC management or history retrieval require the <strong>Configuration Key</strong> or the <strong>Master Key</strong>. See the <a href="https://thib3113.github.io/boks-sdk-js/guide/credentials">Retrieving Credentials</a> guide for more details.</p>
<pre><code class="typescript"><span class="hl-5">// Scan for NFC tags (requires HW &gt;= 4.0)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">scanResult</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">scanNFCTags</span><span class="hl-1">();</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Found tag: </span><span class="hl-6">${</span><span class="hl-4">scanResult</span><span class="hl-8">.</span><span class="hl-4">tagId</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">scanResult</span><span class="hl-1">.</span><span class="hl-0">register</span><span class="hl-1">(); </span><span class="hl-5">// Register the found tag</span><br/><br/><span class="hl-5">// Fetch usage history</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">logs</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">fetchHistory</span><span class="hl-1">();</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">logs</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="custom-transports-nodejs-cordova--react-native" class="tsd-anchor-link">Custom Transports (Node.js / Cordova / React Native)<a href="#custom-transports-nodejs-cordova--react-native" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>By default, <code>BoksController</code> uses the standard WebBluetooth API (Chrome/Edge/Bluefy). However, for environments without WebBluetooth (like Node.js, React Native, or Cordova), you can inject a custom transport layer.</p>
<h3 id="example-nodejs-with" class="tsd-anchor-link">Example: Node.js with <code>noble</code><a href="#example-nodejs-with" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can implement the <code>BoksTransport</code> interface using libraries like <code>noble</code>.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksController</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">NobleTransport</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./your-custom-transport&#39;</span><span class="hl-1">; </span><span class="hl-5">// Your implementation of BoksTransport</span><br/><br/><span class="hl-5">// Inject the custom transport into the client options</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">transport</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">NobleTransport</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">controller</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksController</span><span class="hl-1">({ </span><span class="hl-4">transport</span><span class="hl-1"> });</span><br/><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="example-cordova-capacitor" class="tsd-anchor-link">Example: Cordova / Capacitor<a href="#example-cordova-capacitor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Similarly, you can wrap <code>cordova-plugin-ble-central</code> or <code>capacitor-community/bluetooth-le</code> in a class implementing <code>BoksTransport</code> and pass it to the controller.</p>
<h2 id="browser-iife-usage" class="tsd-anchor-link">Browser / IIFE Usage<a href="#browser-iife-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>You can use the SDK directly in the browser via a CDN (like unpkg or jsdelivr) without a bundler.</p>
<pre><code class="html"><span class="hl-5">&lt;!-- Full SDK (includes Client &amp; Protocol) --&gt;</span><br/><span class="hl-9">&lt;</span><span class="hl-10">script</span><span class="hl-8"> </span><span class="hl-11">src</span><span class="hl-8">=</span><span class="hl-12">&quot;https://unpkg.com/@thib3113/boks-sdk/dist/boks-sdk.js&quot;</span><span class="hl-9">&gt;&lt;/</span><span class="hl-10">script</span><span class="hl-9">&gt;</span><br/><span class="hl-9">&lt;</span><span class="hl-10">script</span><span class="hl-9">&gt;</span><br/><span class="hl-8">  </span><span class="hl-5">// Access via the global BoksSDK object</span><br/><span class="hl-8">  </span><span class="hl-6">const</span><span class="hl-8"> </span><span class="hl-7">controller</span><span class="hl-8"> </span><span class="hl-1">=</span><span class="hl-8"> </span><span class="hl-6">new</span><span class="hl-8"> </span><span class="hl-4">BoksSDK</span><span class="hl-8">.</span><span class="hl-0">BoksController</span><span class="hl-8">();</span><br/><br/><span class="hl-8">  </span><span class="hl-4">document</span><span class="hl-8">.</span><span class="hl-0">getElementById</span><span class="hl-8">(</span><span class="hl-2">&#39;connectBtn&#39;</span><span class="hl-8">).</span><span class="hl-0">onclick</span><span class="hl-8"> </span><span class="hl-1">=</span><span class="hl-8"> </span><span class="hl-6">async</span><span class="hl-8"> () </span><span class="hl-6">=&gt;</span><span class="hl-8"> {</span><br/><span class="hl-8">    </span><span class="hl-3">await</span><span class="hl-8"> </span><span class="hl-4">controller</span><span class="hl-8">.</span><span class="hl-0">connect</span><span class="hl-8">();</span><br/><span class="hl-8">    </span><span class="hl-4">console</span><span class="hl-8">.</span><span class="hl-0">log</span><span class="hl-8">(</span><span class="hl-2">&#39;Connected!&#39;</span><span class="hl-8">);</span><br/><span class="hl-8">  };</span><br/><span class="hl-9">&lt;/</span><span class="hl-10">script</span><span class="hl-9">&gt;</span><br/><br/><span class="hl-5">&lt;!-- Core Only (Protocol &amp; Crypto, lighter) --&gt;</span><br/><span class="hl-9">&lt;</span><span class="hl-10">script</span><span class="hl-8"> </span><span class="hl-11">src</span><span class="hl-8">=</span><span class="hl-12">&quot;https://unpkg.com/@thib3113/boks-sdk/dist/boks-core.js&quot;</span><span class="hl-9">&gt;&lt;/</span><span class="hl-10">script</span><span class="hl-9">&gt;</span><br/><span class="hl-9">&lt;</span><span class="hl-10">script</span><span class="hl-9">&gt;</span><br/><span class="hl-8">  </span><span class="hl-5">// Useful for generating PINs client-side without BLE dependencies</span><br/><span class="hl-8">  </span><span class="hl-6">const</span><span class="hl-8"> </span><span class="hl-7">pin</span><span class="hl-8"> </span><span class="hl-1">=</span><span class="hl-8"> </span><span class="hl-4">BoksSDK</span><span class="hl-8">.</span><span class="hl-0">generateBoksPin</span><span class="hl-8">(</span><span class="hl-4">masterKeyBytes</span><span class="hl-8">, </span><span class="hl-2">&#39;single-use&#39;</span><span class="hl-8">, </span><span class="hl-13">0</span><span class="hl-8">);</span><br/><span class="hl-9">&lt;/</span><span class="hl-10">script</span><span class="hl-9">&gt;</span>
</code><button type="button">Copy</button></pre>

<h2 id="core-only-low-level" class="tsd-anchor-link">Core Only (Low-Level)<a href="#core-only-low-level" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>For environments where bundle size is critical (e.g., restricted IoT devices) or when you only need specific algorithms without the full client logic, you can import from the <code>core</code> entry point.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksPacketFactory</span><span class="hl-1">, </span><span class="hl-4">generateBoksPin</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// 1. Generate a PIN locally (BLAKE2s based)</span><br/><span class="hl-5">// Useful for server-side generation or offline apps</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">pin</span><span class="hl-1"> = </span><span class="hl-0">generateBoksPin</span><span class="hl-1">(</span><span class="hl-4">masterKeyBytes</span><span class="hl-1">, </span><span class="hl-2">&#39;single-use&#39;</span><span class="hl-1">, </span><span class="hl-4">sequenceNumber</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// 2. Create raw BLE packets manually</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">packet</span><span class="hl-1"> = </span><span class="hl-4">BoksPacketFactory</span><span class="hl-1">.</span><span class="hl-0">createOpenDoorPacket</span><span class="hl-1">(</span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bytes</span><span class="hl-1"> = </span><span class="hl-4">packet</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="experimental-features" class="tsd-anchor-link">Experimental Features<a href="#experimental-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<blockquote>
<p>‚ö†Ô∏è <strong>Warning:</strong> These features are experimental and may change or be removed in future versions. Use with caution.</p>
</blockquote>
<h3 id="boks-scale" class="tsd-anchor-link">Boks Scale<a href="#boks-scale" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Support for the connected scale accessory.</p>
<pre><code class="typescript"><span class="hl-5">// Bond with the scale</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">bondScale</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// Get weight</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">weight</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">getScaleWeight</span><span class="hl-1">();</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Weight: </span><span class="hl-6">${</span><span class="hl-4">weight</span><span class="hl-6">}</span><span class="hl-2">g`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="provisioning-master-key-regeneration" class="tsd-anchor-link">Provisioning (Master Key Regeneration)<a href="#provisioning-master-key-regeneration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>Mechanisms to regenerate the Master Key on the device.</p>
<pre><code class="typescript"><span class="hl-5">// Regenerate the Master Key (requires current credentials)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">regenerateMasterKey</span><span class="hl-1">(</span><span class="hl-4">newMasterKeyBytes</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Factory Initialization (requires seed, no auth)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">initialize</span><span class="hl-1">(</span><span class="hl-4">seedBytes</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>Check the <a href="media/examples">examples/</a> folder for complete scripts demonstrating various use cases:</p>
<ul>
<li><strong>Initialization</strong>: How to initialize a brand new Boks device.</li>
<li><strong>Updates</strong>: How to perform firmware updates (if applicable).</li>
<li><strong>Basic Usage</strong>: Simple open/close operations.</li>
</ul>
<h2 id="hardware-simulator" class="tsd-anchor-link">Hardware Simulator<a href="#hardware-simulator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>The SDK includes a high-fidelity hardware simulator, <code>BoksHardwareSimulator</code>, designed for integration testing without a physical device. It accurately mimics the protocol state machine, including history logging, error conditions, and even specific <a href="https://thib3113.github.io/boks-sdk-js/guide/quirks">Hardware Quirks</a> like the &quot;Stuck Motor&quot; behavior.</p>
<h3 id="installation-1" class="tsd-anchor-link">Installation<a href="#installation-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>The simulator is available via a dedicated entry point:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksHardwareSimulator</span><span class="hl-1">, </span><span class="hl-4">SimulatorTransport</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk/simulator&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksController</span><span class="hl-1">, </span><span class="hl-4">BoksCodeType</span><span class="hl-1">, </span><span class="hl-4">BoksOpenSource</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="basic-usage" class="tsd-anchor-link">Basic Usage<a href="#basic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can inject the simulator into the <code>BoksController</code> using a <code>SimulatorTransport</code>.</p>
<pre><code class="typescript"><span class="hl-5">// 1. Create the simulator</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">simulator</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksHardwareSimulator</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// 2. Configure the simulator state</span><br/><span class="hl-4">simulator</span><span class="hl-1">.</span><span class="hl-0">addPinCode</span><span class="hl-1">(</span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">, </span><span class="hl-4">BoksCodeType</span><span class="hl-1">.</span><span class="hl-4">Single</span><span class="hl-1">); </span><span class="hl-5">// Add a valid PIN</span><br/><span class="hl-4">simulator</span><span class="hl-1">.</span><span class="hl-0">setBatteryLevel</span><span class="hl-1">(</span><span class="hl-13">85</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// 3. Create a transport linked to the simulator</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">transport</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">SimulatorTransport</span><span class="hl-1">(</span><span class="hl-4">simulator</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// 4. Use the controller as usual</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">controller</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksController</span><span class="hl-1">({ </span><span class="hl-4">transport</span><span class="hl-1"> });</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">(); </span><span class="hl-5">// Connects to the simulator immediately</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">openDoor</span><span class="hl-1">(</span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">); </span><span class="hl-5">// Validates against simulator state</span>
</code><button type="button">Copy</button></pre>

<h3 id="persistence-storage" class="tsd-anchor-link">Persistence (Storage)<a href="#persistence-storage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can persist the simulator's state (PINs, logs, configuration) by injecting a storage implementation.</p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">storage</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">get</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">key</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">localStorage</span><span class="hl-1">.</span><span class="hl-0">getItem</span><span class="hl-1">(</span><span class="hl-2">&#39;boks-sim-&#39;</span><span class="hl-1"> + </span><span class="hl-4">key</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">set</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">key</span><span class="hl-1">, </span><span class="hl-4">val</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">localStorage</span><span class="hl-1">.</span><span class="hl-0">setItem</span><span class="hl-1">(</span><span class="hl-2">&#39;boks-sim-&#39;</span><span class="hl-1"> + </span><span class="hl-4">key</span><span class="hl-1">, </span><span class="hl-4">val</span><span class="hl-1">)</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">simulator</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksHardwareSimulator</span><span class="hl-1">(</span><span class="hl-4">storage</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="peripheral-mode-nodejs-bleno" class="tsd-anchor-link">Peripheral Mode (Node.js / Bleno)<a href="#peripheral-mode-nodejs-bleno" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can also use the simulator to create a virtual Boks peripheral on Linux/Raspberry Pi that real clients can connect to. See <a href="./docs/SIMULATOR_PERIPHERAL.md">SIMULATOR_PERIPHERAL.md</a> for details.</p>
<h3 id="simulating-events" class="tsd-anchor-link">Simulating Events<a href="#simulating-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can trigger hardware events programmatically to test your application's reaction to real-world scenarios.</p>
<pre><code class="typescript"><span class="hl-5">// Simulate a user opening the door via the Keypad</span><br/><span class="hl-4">simulator</span><span class="hl-1">.</span><span class="hl-0">triggerDoorOpen</span><span class="hl-1">(</span><span class="hl-4">BoksOpenSource</span><span class="hl-1">.</span><span class="hl-4">Keypad</span><span class="hl-1">, </span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Simulate a physical key opening (no code)</span><br/><span class="hl-4">simulator</span><span class="hl-1">.</span><span class="hl-0">triggerDoorOpen</span><span class="hl-1">(</span><span class="hl-4">BoksOpenSource</span><span class="hl-1">.</span><span class="hl-4">PhysicalKey</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Verify that the history logs reflect these events</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">history</span><span class="hl-1"> = </span><span class="hl-4">simulator</span><span class="hl-1">.</span><span class="hl-0">getState</span><span class="hl-1">().</span><span class="hl-4">logs</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<h3 id="integration-testing" class="tsd-anchor-link">Integration Testing<a href="#integration-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3>
<p>You can use the simulator to run full integration tests for your application logic without needing physical hardware. The simulator faithfully reproduces protocol behavior, including asynchronous notifications and state changes.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksController</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BoksHardwareSimulator</span><span class="hl-1">, </span><span class="hl-4">SimulatorTransport</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@thib3113/boks-sdk/simulator&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// 1. Setup Simulator</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">simulator</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksHardwareSimulator</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">transport</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">SimulatorTransport</span><span class="hl-1">(</span><span class="hl-4">simulator</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// 2. Setup Controller with Simulator Transport</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">controller</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">BoksController</span><span class="hl-1">({ </span><span class="hl-4">transport</span><span class="hl-1"> });</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// 3. Run Test Scenario</span><br/><span class="hl-5">// Initialize device (Provisioning)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">seed</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">(</span><span class="hl-13">32</span><span class="hl-1">).</span><span class="hl-0">fill</span><span class="hl-1">(</span><span class="hl-13">0xAA</span><span class="hl-1">); </span><span class="hl-5">// 32-byte seed</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">initialize</span><span class="hl-1">(</span><span class="hl-4">seed</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Authenticate using the seed (Controller derives keys)</span><br/><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">setCredentials</span><span class="hl-1">(</span><span class="hl-4">seed</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Create a code and use it</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">createSingleUseCode</span><span class="hl-1">(</span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">success</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">controller</span><span class="hl-1">.</span><span class="hl-0">openDoor</span><span class="hl-1">(</span><span class="hl-2">&#39;123456&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Door opened:&#39;</span><span class="hl-1">, </span><span class="hl-4">success</span><span class="hl-1">); </span><span class="hl-5">// true</span>
</code><button type="button">Copy</button></pre>

<h2 id="sponsor-this-project" class="tsd-anchor-link">Sponsor this Project<a href="#sponsor-this-project" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>If you find this SDK useful, please consider sponsoring the project to support ongoing development and maintenance.</p>
<p><a href="https://github.com/sponsors/thib3113">Become a Sponsor</a></p>
<hr>
<p><strong>Legal Note:</strong> This software is provided &quot;AS IS&quot;, without warranty of any kind. The author cannot be held responsible for any damage to your device. See <a href="media/LEGALS.md">LEGALS.md</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#boks-sdk-js-unofficial"><span>Boks <wbr/>SDK <wbr/>JS (<wbr/>Unofficial)</span></a><ul><li><a href="#‚ú®-key-features"><span>‚ú® <wbr/>Key <wbr/>Features</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#high-level-usage-recommended"><span>High-<wbr/>Level <wbr/>Usage (<wbr/>Recommended)</span></a></li><li><ul><li><a href="#1-initialization-connection"><span>1. <wbr/>Initialization &amp; <wbr/>Connection</span></a></li><li><a href="#2-authentication-configuration"><span>2. <wbr/>Authentication &amp; <wbr/>Configuration</span></a></li><li><a href="#3-basic-operations"><span>3. <wbr/>Basic <wbr/>Operations</span></a></li><li><a href="#4-advanced-administrative-tasks"><span>4. <wbr/>Advanced <wbr/>Administrative <wbr/>Tasks</span></a></li></ul></li><li><a href="#custom-transports-nodejs-cordova--react-native"><span>Custom <wbr/>Transports (<wbr/>Node.js / <wbr/>Cordova / <wbr/>React <wbr/>Native)</span></a></li><li><ul><li><a href="#example-nodejs-with"><span>Example: <wbr/>Node.js with </span></a></li><li><a href="#example-cordova-capacitor"><span>Example: <wbr/>Cordova / <wbr/>Capacitor</span></a></li></ul></li><li><a href="#browser-iife-usage"><span>Browser / <wbr/>IIFE <wbr/>Usage</span></a></li><li><a href="#core-only-low-level"><span>Core <wbr/>Only (<wbr/>Low-<wbr/>Level)</span></a></li><li><a href="#experimental-features"><span>Experimental <wbr/>Features</span></a></li><li><ul><li><a href="#boks-scale"><span>Boks <wbr/>Scale</span></a></li><li><a href="#provisioning-master-key-regeneration"><span>Provisioning (<wbr/>Master <wbr/>Key <wbr/>Regeneration)</span></a></li></ul></li><li><a href="#examples"><span>Examples</span></a></li><li><a href="#hardware-simulator"><span>Hardware <wbr/>Simulator</span></a></li><li><ul><li><a href="#installation-1"><span>Installation</span></a></li><li><a href="#basic-usage"><span>Basic <wbr/>Usage</span></a></li><li><a href="#persistence-storage"><span>Persistence (<wbr/>Storage)</span></a></li><li><a href="#peripheral-mode-nodejs-bleno"><span>Peripheral <wbr/>Mode (<wbr/>Node.js / <wbr/>Bleno)</span></a></li><li><a href="#simulating-events"><span>Simulating <wbr/>Events</span></a></li><li><a href="#integration-testing"><span>Integration <wbr/>Testing</span></a></li></ul></li><li><a href="#sponsor-this-project"><span>Sponsor this <wbr/>Project</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">Boks SDK Documentation - v0.0.8</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
